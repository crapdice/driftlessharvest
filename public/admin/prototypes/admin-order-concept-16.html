<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Concept 16: Control Tower</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { harvest: { 500: '#10B981', 600: '#059669', 900: '#064E3B' } } } }
        }
    </script>
</head>

<body class="bg-slate-900 h-screen flex flex-col font-sans overflow-hidden text-slate-50">

    <!-- NAV -->
    <header
        class="h-14 border-b border-slate-700/50 flex items-center justify-between px-6 bg-slate-800/50 backdrop-blur-sm">
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 font-bold tracking-tight">
                <i class="ri-radar-fill text-emerald-500"></i> CONTROL TOWER
            </div>
            <div
                class="px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-400 text-[10px] font-bold border border-emerald-500/20">
                LIVE</div>
        </div>
        <div class="flex items-center gap-6 text-xs font-medium text-slate-400">
            <span>Server Time: <span class="text-white font-mono">14:02:55 UTC</span></span>
            <a href="admin-order-concept-9.html" class="hover:text-white">Exit to Standard View &rarr;</a>
        </div>
    </header>

    <!-- TOP HALF: VISUALIZATION -->
    <div class="h-[45vh] grid grid-cols-4 gap-px bg-slate-700/50 border-b border-slate-700/50">

        <!-- METRIC 1 -->
        <div
            class="bg-slate-800 p-6 flex flex-col justify-between group hover:bg-slate-700/80 transition-colors cursor-pointer relative overflow-hidden">
            <div class="flex justify-between">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Revenue (24h)</h3>
                <i class="ri-money-dollar-circle-line text-emerald-500 opacity-50 text-xl"></i>
            </div>
            <div>
                <div class="text-3xl font-black text-white mb-1">$4,295.00</div>
                <div class="text-xs text-emerald-400 font-bold flex items-center gap-1">
                    <i class="ri-arrow-up-line"></i> 12% vs yesterday
                </div>
            </div>
            <!-- Sparkline Deco -->
            <div class="absolute bottom-0 left-0 right-0 h-16 opacity-20 pointer-events-none">
                <svg viewBox="0 0 100 40" preserveAspectRatio="none" class="w-full h-full fill-emerald-500">
                    <path
                        d="M0 40 L0 30 L10 25 L20 35 L30 20 L40 28 L50 15 L60 25 L70 10 L80 20 L90 5 L100 0 L100 40 Z">
                    </path>
                </svg>
            </div>
        </div>

        <!-- METRIC 2 -->
        <div
            class="bg-slate-800 p-6 flex flex-col justify-between group hover:bg-slate-700/80 transition-colors cursor-pointer">
            <div class="flex justify-between">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Orders / Hour</h3>
                <i class="ri-shopping-cart-line text-blue-500 opacity-50 text-xl"></i>
            </div>
            <div>
                <div class="text-3xl font-black text-white mb-1">42</div>
                <div class="text-xs text-slate-400 font-medium">Peaking at 65/hr</div>
            </div>
            <div class="w-full bg-slate-700 h-1 rounded-full mt-4 overflow-hidden">
                <div class="bg-blue-500 w-3/4 h-full"></div>
            </div>
        </div>

        <!-- METRIC 3 -->
        <div
            class="bg-slate-800 p-6 flex flex-col justify-between group hover:bg-slate-700/80 transition-colors cursor-pointer">
            <div class="flex justify-between">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Failed Payments</h3>
                <i class="ri-error-warning-line text-red-500 opacity-50 text-xl"></i>
            </div>
            <div>
                <div class="text-3xl font-black text-white mb-1">3</div>
                <div class="text-xs text-red-400 font-bold flex items-center gap-1">
                    Attention Required
                </div>
            </div>
        </div>

        <!-- METRIC 4 (CHART) -->
        <div class="bg-slate-800 p-4 relative">
            <canvas id="fulfillmentChart" class="w-full h-full"></canvas>
        </div>
    </div>

    <!-- BOTTOM HALF: LIVE FEED -->
    <div class="flex-1 flex flex-col bg-slate-900 border-t border-slate-700/50">
        <div class="h-10 bg-slate-800/50 px-6 flex items-center justify-between border-b border-slate-700/50">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                Real-Time Event Stream
            </h3>
            <button class="text-xs text-blue-400 hover:text-white font-medium">Pause Stream</button>
        </div>

        <div class="flex-1 overflow-y-auto p-0" id="feed-container">
            <!-- JS GENERATED -->
        </div>
    </div>

    <script>
        // Init Chart
        const ctx = document.getElementById('fulfillmentChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Delivered', 'In Transit', 'Packing', 'Pending'],
                datasets: [{
                    data: [300, 50, 100, 80],
                    backgroundColor: ['#10b981', '#3b82f6', '#6366f1', '#f59e0b'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'right', labels: { color: '#94a3b8', font: { size: 10 } } } }
            }
        });

        // Live Feed Feed
        const events = [
            { type: 'order', msg: 'New Order #ORD-8892 from Manhattan', time: 'Just now', color: 'text-emerald-400' },
            { type: 'payment', msg: 'Payment Failed for #ORD-8891 (Card Declined)', time: '2s ago', color: 'text-red-400' },
            { type: 'log', msg: 'System Backup Completed', time: '12s ago', color: 'text-slate-400' },
            { type: 'ship', msg: 'Order #ORD-8830 Shipped via FedEx', time: '45s ago', color: 'text-blue-400' },
            { type: 'order', msg: 'New Order #ORD-8890 from Brooklyn', time: '1m ago', color: 'text-emerald-400' },
            { type: 'order', msg: 'New Order #ORD-8889 from Queens', time: '1m ago', color: 'text-emerald-400' },
            { type: 'ship', msg: 'Order #ORD-8822 Shipped via Local Van', time: '2m ago', color: 'text-blue-400' },
        ];

        const container = document.getElementById('feed-container');

        container.innerHTML = events.map(e => `
            <div class="px-6 py-3 border-b border-slate-800 hover:bg-slate-800/50 flex items-center justify-between group transition-colors cursor-pointer">
                <div class="flex items-center gap-4">
                    <span class="font-mono text-[10px] text-slate-500 w-16 text-right">${e.time}</span>
                    <span class="text-sm font-medium ${e.color}">${e.msg}</span>
                </div>
                <button class="opacity-0 group-hover:opacity-100 text-xs bg-slate-700 px-2 py-1 rounded text-white hover:bg-slate-600">View</button>
            </div>
        `).join('');

        // Simulating incoming events
        setInterval(() => {
            const newEvent = document.createElement('div');
            newEvent.className = "px-6 py-3 border-b border-slate-800 bg-slate-800/80 items-center justify-between group transition-all cursor-pointer flex animate-pulse";
            newEvent.innerHTML = `
                <div class="flex items-center gap-4">
                    <span class="font-mono text-[10px] text-slate-500 w-16 text-right">Now</span>
                    <span class="text-sm font-medium text-emerald-400">New Order #ORD-${Math.floor(Math.random() * 9000)} received</span>
                </div>
                <button class="opacity-0 group-hover:opacity-100 text-xs bg-slate-700 px-2 py-1 rounded text-white hover:bg-slate-600">View</button>
            `;
            container.prepend(newEvent);
            setTimeout(() => newEvent.classList.remove('animate-pulse', 'bg-slate-800/80'), 1000);
            if (container.children.length > 20) container.lastElementChild.remove();
        }, 3500);

    </script>
</body>

</html>