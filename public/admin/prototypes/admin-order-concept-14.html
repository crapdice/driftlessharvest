<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Concept 14: Calendar Dispatch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: { extend: { colors: { harvest: { 500: '#10B981', 600: '#059669', 900: '#064E3B' } } } }
        }
    </script>
    <style>
        .calendar-cell {
            min-height: 120px;
            transition: background 0.2s;
        }

        .calendar-cell:hover {
            background-color: #f8fafc;
        }

        .drag-target {
            background-color: #eff6ff;
            box-shadow: inset 0 0 0 2px #3b82f6;
        }

        .card-drag {
            opacity: 0.5;
            transform: rotate(3deg);
        }
    </style>
</head>

<body class="bg-gray-100 h-screen flex flex-col font-sans overflow-hidden">

    <!-- HEADER -->
    <header class="bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shadow-sm z-20">
        <div>
            <h1 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                <span
                    class="w-8 h-8 bg-orange-500 text-white rounded-lg flex items-center justify-center text-sm font-mono">P14</span>
                Calendar Dispatch
            </h1>
            <p class="text-xs text-gray-500 mt-1">Drag-and-drop visual rescheduling</p>
        </div>

        <div class="flex bg-gray-100 p-1 rounded-lg">
            <button class="bg-white px-3 py-1 rounded shadow-sm text-xs font-bold text-gray-800">Month</button>
            <button class="px-3 py-1 rounded text-xs font-bold text-gray-500 hover:text-gray-900">Week</button>
            <button class="px-3 py-1 rounded text-xs font-bold text-gray-500 hover:text-gray-900">Day</button>
        </div>

        <div class="flex items-center gap-3">
            <div class="text-sm font-bold text-gray-700">October 2026</div>
            <div class="flex gap-1">
                <button class="w-6 h-6 rounded hover:bg-gray-200 flex items-center justify-center"><i
                        class="ri-arrow-left-s-line"></i></button>
                <button class="w-6 h-6 rounded hover:bg-gray-200 flex items-center justify-center"><i
                        class="ri-arrow-right-s-line"></i></button>
            </div>
            <a href="admin-order-concept-15.html"
                class="ml-4 text-sm font-medium text-gray-400 hover:text-gray-900 transition-colors">Next Concept
                &rarr;</a>
        </div>
    </header>

    <!-- CALENDAR GRID -->
    <div class="flex-1 bg-white grid grid-cols-7 grid-rows-6 text-sm relative">

        <!-- Day Headers -->
        <div class="col-span-7 grid grid-cols-7 border-b border-gray-200 bg-gray-50">
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Sun</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Mon</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Tue</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Wed</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Thu</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Fri</div>
            <div class="p-2 text-center text-gray-400 font-bold uppercase text-[10px] tracking-wider">Sat</div>
        </div>

        <!-- Cells JS GENERATED -->
        <div id="calendar-body" class="col-span-7 row-span-5 grid grid-cols-7 grid-rows-5 h-full">
        </div>

    </div>

    <!-- UNSCHEDULED DRAWER -->
    <div class="h-48 bg-gray-800 border-t border-gray-700 flex flex-col z-30">
        <div
            class="px-6 py-2 bg-gray-900 text-gray-400 text-xs font-bold uppercase tracking-wider flex justify-between">
            <span>Unscheduled Queue (3)</span>
            <span>Drag to Calendar to Schedule</span>
        </div>
        <div class="flex-1 p-4 overflow-x-auto flex gap-4 items-center">
            <div class="w-64 bg-white p-3 rounded-lg shadow cursor-grab active:cursor-grabbing hover:-translate-y-1 transition-transform"
                draggable="true" ondragstart="drag(event)">
                <div class="flex justify-between mb-1">
                    <span class="font-bold text-gray-900">Dr. Silberman</span>
                    <span class="text-xs bg-red-100 text-red-600 px-1 rounded font-bold">URGENT</span>
                </div>
                <div class="text-xs text-gray-500">2 Items • 12.5 lbs</div>
            </div>
            <div class="w-64 bg-white p-3 rounded-lg shadow cursor-grab active:cursor-grabbing hover:-translate-y-1 transition-transform"
                draggable="true" ondragstart="drag(event)">
                <div class="flex justify-between mb-1">
                    <span class="font-bold text-gray-900">Miles Dyson</span>
                </div>
                <div class="text-xs text-gray-500">8 Items • 45.0 lbs</div>
            </div>
            <div class="w-64 bg-white p-3 rounded-lg shadow cursor-grab active:cursor-grabbing hover:-translate-y-1 transition-transform"
                draggable="true" ondragstart="drag(event)">
                <div class="flex justify-between mb-1">
                    <span class="font-bold text-gray-900">New Guest</span>
                </div>
                <div class="text-xs text-gray-500">1 Item</div>
            </div>
        </div>
    </div>

    <script>
        const daysInMonth = 31;
        const startDay = 4; // Thursday

        const scheduledEvents = {
            '24': [
                { id: 1, name: 'Sarah Connor', time: '10:00 AM', status: 'Paid' },
                { id: 2, name: 'Kyle Reese', time: '2:00 PM', status: 'Packed' }
            ],
            '25': [
                { id: 3, name: 'T-800', time: '9:00 AM', status: 'Shipped' }
            ],
            '21': [
                { id: 4, name: 'John Connor', time: '11:00 AM', status: 'Delivered' }
            ]
        };

        function renderCalendar() {
            const container = document.getElementById('calendar-body');
            let html = '';

            // Previous month padding
            for (let i = 0; i < startDay; i++) {
                html += `<div class="border-r border-b border-gray-100 bg-gray-50 p-2 opacity-50"></div>`;
            }

            // Days
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEvents = scheduledEvents[day] || [];
                const isToday = day === 24;
                const dateClass = isToday ? 'bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-sm' : 'text-gray-700';

                html += `
                    <div class="border-r border-b border-gray-100 p-2 calendar-cell relative group" ondragover="allowDrop(event)" ondrop="drop(event, ${day})" ondragenter="this.classList.add('drag-target')" ondragleave="this.classList.remove('drag-target')">
                        <span class="text-xs font-bold ${dateClass} mb-1 inline-block">${day}</span>
                        <div class="space-y-1 mt-1">
                            ${dayEvents.map(e => `
                                <div class="bg-blue-50 border border-blue-100 text-blue-800 p-1 rounded text-[10px] font-medium truncate cursor-pointer hover:bg-blue-100 shadow-sm" draggable="true" ondragstart="drag(event)">
                                    ${e.name}
                                </div>
                            `).join('')}
                        </div>
                        <button class="absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 text-gray-300 hover:text-blue-500"><i class="ri-add-circle-fill text-xl"></i></button>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        window.allowDrop = (ev) => ev.preventDefault();

        window.drag = (ev) => {
            ev.dataTransfer.setData("text", ev.target.innerText);
            ev.target.classList.add('card-drag');
        }

        window.drop = (ev, day) => {
            ev.preventDefault();
            ev.currentTarget.classList.remove('drag-target');
            // Simplified demo interaction
            const el = document.createElement('div');
            el.className = 'bg-green-50 border border-green-100 text-green-800 p-1 rounded text-[10px] font-medium truncate cursor-pointer shadow-sm animate-pulse';
            el.innerText = 'Moved Order';
            const container = ev.currentTarget.querySelector('.space-y-1');
            container.appendChild(el);
            setTimeout(() => el.classList.remove('animate-pulse'), 500);
        }

        renderCalendar();
    </script>
</body>

</html>