<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Forecast | Driftless Harvest</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --paper-bg: #FFFCF5;
            --ink-black: #1a1a1a;
            --faded-ink: #555;
            --border-width: 2px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--paper-bg);
            color: var(--ink-black);
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4d1c9' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        h1,
        h2,
        h3,
        .serif {
            font-family: 'Libre Baskerville', serif;
        }

        .journal-border {
            border: var(--border-width) solid var(--ink-black);
        }

        .journal-border-b {
            border-bottom: var(--border-width) solid var(--ink-black);
        }

        .journal-border-r {
            border-right: var(--border-width) solid var(--ink-black);
        }

        /* Chart corrections for light mode */
        text {
            fill: var(--ink-black) !important;
        }

        path.domain,
        .tick line {
            stroke: var(--ink-black) !important;
        }

        .stat-card {
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>

<body class="min-h-screen p-6 md:p-12">

    <!-- Top Navigation / Masthead -->
    <header
        class="max-w-[1400px] mx-auto mb-12 border-b-4 border-black pb-6 flex flex-col md:flex-row justify-between items-end md:items-center gap-6">
        <div>
            <div class="flex items-center gap-3 mb-2">
                <a href="/admin"
                    class="text-sm font-bold uppercase tracking-widest hover:underline flex items-center gap-2">
                    <span>←</span> Return to Admin
                </a>
                <span class="text-gray-400">|</span>
                <span class="text-sm font-bold uppercase tracking-widest text-gray-500">Vol. 4, Issue 12</span>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold tracking-tight text-black">The Forecast</h1>
            <p class="font-serif italic text-xl mt-2 text-gray-700">Harvesting data from the Driftless hills.</p>
        </div>

        <div class="flex gap-4">
            <button id="refresh-btn"
                class="px-6 py-3 border-2 border-black font-serif italic hover:bg-black hover:text-white transition-colors">
                Refresh Data
            </button>
            <div id="user-avatar"
                class="w-12 h-12 border-2 border-black rounded-full flex items-center justify-center font-bold bg-white"
                title="Admin">
                AD
            </div>
        </div>
    </header>

    <!-- Main Content Layout: Grid -->
    <main class="max-w-[1400px] mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12">

        <!-- LEFT COLUMN (Controls & Context) - Span 3 -->
        <aside class="lg:col-span-3 space-y-12">

            <!-- Traffic Control (Launch Mode) -->
            <section class="journal-border p-6 bg-white relative">
                <div
                    class="absolute -top-3 left-4 bg-white px-2 font-bold uppercase tracking-widest text-xs border border-black">
                    Control Tower
                </div>

                <div class="space-y-6">
                    <div class="flex justify-between items-center pb-4 border-b border-black">
                        <span class="font-serif text-lg">Launch Mode</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="launch-mode-toggle" class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-gray-200 peer-focus:outline-none border-2 border-black rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-black after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-black">
                            </div>
                        </label>
                    </div>

                    <div class="space-y-2">
                        <label class="text-xs font-bold uppercase tracking-widest">Active Variant</label>
                        <select id="active-variant"
                            class="w-full p-3 border-2 border-black bg-white font-serif focus:outline-none focus:ring-1 focus:ring-black">
                            <option value="Hearth & Harvest (Design 1)">Hearth & Harvest (Design 1)</option>
                            <option value="Modern Field (Design 2)">Modern Field (Design 2)</option>
                            <option value="Artisan Sketch (Design 3)">Artisan Sketch (Design 3)</option>
                            <option value="The Harvest Journal (Design 4)">The Harvest Journal (Design 4)</option>
                            <option value="Hands of the Driftless (Design 5)">Hands of the Driftless (Design 5)</option>
                            <option value="The Seasonal Bloom (Design 6)">The Seasonal Bloom (Design 6)</option>
                        </select>
                    </div>

                    <button id="save-config"
                        class="w-full py-3 bg-black text-white font-bold uppercase tracking-widest hover:bg-gray-800 transition-colors">
                        Sync Deployment
                    </button>

                    <div id="launch-status-card" class="text-center pt-2">
                        <span id="launch-status-text" class="font-mono text-xs text-gray-500">STATUS: STANDBY</span>
                    </div>
                </div>
            </section>

            <!-- Neural Predictor -->
            <section class="journal-border p-6 bg-black text-white">
                <h3 class="font-serif text-xl border-b border-white/20 pb-4 mb-4">Neural Insight</h3>
                <div id="significance-predictor" class="font-mono text-sm leading-relaxed text-gray-300">
                    Calculating growth vectors...
                </div>
            </section>

            <!-- Attribution Brief -->
            <section>
                <h3 class="font-bold uppercase tracking-widest text-xs mb-4 border-b-2 border-black pb-2">Source
                    Attribution</h3>
                <div id="source-breakdown" class="space-y-4 font-serif">
                    <!-- Bars injected here -->
                </div>
            </section>

        </aside>

        <!-- CENTER/RIGHT COLUMN (Data) - Span 9 -->
        <div class="lg:col-span-9 space-y-12">

            <!-- Stats Row (Key Metrics) -->
            <section id="stats-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Injected Cards -->
                <div class="journal-border p-6 h-32 flex items-center justify-center text-gray-400 font-serif italic">
                    Loading almanac data...
                </div>
            </section>

            <!-- Velocity Chart -->
            <section class="journal-border p-8 bg-white">
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <h2 class="text-3xl font-serif mb-2">Growth Velocity</h2>
                        <p class="text-gray-500 italic">Daily signup traction across all variants.</p>
                    </div>
                    <div class="text-right">
                        <h3 class="text-xs font-bold uppercase tracking-widest">Current Trend</h3>
                        <span class="text-2xl font-serif">+12%</span>
                    </div>
                </div>
                <div id="velocity-chart" class="h-64 w-full"></div>
            </section>

            <!-- Milestone Matrix (Goal) -->
            <section class="grid md:grid-cols-2 gap-12 items-center border-t-2 border-b-2 border-black py-12">
                <div>
                    <h2 class="text-4xl font-serif mb-4">The 500 Goal</h2>
                    <p class="text-lg leading-relaxed text-gray-700 font-serif">
                        We are tracking towards our initial harvest goal of 500 early-adopter families.
                        Reaching this threshold triggers the <span class="font-bold">Emerald Blast</span> protocol.
                    </p>
                </div>
                <div class="space-y-6">
                    <div class="flex justify-between items-end font-bold">
                        <span class="uppercase tracking-widest text-xs">Progress</span>
                        <span id="milestone-percent" class="text-xl">0%</span>
                    </div>
                    <div class="w-full h-4 border-2 border-black p-0.5">
                        <div id="milestone-bar" class="h-full bg-black transition-all duration-1000" style="width: 0%">
                        </div>
                    </div>
                    <p class="text-right text-sm italic text-gray-500">
                        <span id="blast-ready-count">0</span> leads ready for activation.
                    </p>
                </div>
            </section>


            <!-- Subscriber Log -->
            <section>
                <div class="flex justify-between items-end mb-6">
                    <h2 class="text-2xl font-serif">Subscriber Log</h2>
                    <button id="export-btn" class="text-xs font-bold uppercase underline hover:text-gray-600">Export
                        CSV</button>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-t-2 border-black">
                        <thead>
                            <tr class="border-b border-black">
                                <th class="py-4 font-bold uppercase tracking-widest text-xs">Identity</th>
                                <th class="py-4 font-bold uppercase tracking-widest text-xs">Variant</th>
                                <th class="py-4 font-bold uppercase tracking-widest text-xs">Origin</th>
                                <th class="py-4 font-bold uppercase tracking-widest text-xs text-right">Action</th>
                            </tr>
                        </thead>
                        <tbody id="signup-list" class="divide-y divide-gray-300 font-serif">
                            <!-- Rows injected here -->
                        </tbody>
                    </table>
                </div>
            </section>

        </div>

    </main>

    <footer class="max-w-[1400px] mx-auto mt-24 py-12 border-t text-center text-sm text-gray-500 font-serif italic">
        Driftless Harvest • Viroqua, WI • Est. 2026
    </footer>

    <script type="module" src="js/marketing.js"></script>
</body>

</html>