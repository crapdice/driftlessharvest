<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viroqua Intensive Market Garden | 0.5 Acre Strategic Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }

        /* Chart Container Styling - Mandatory Strictness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Timeline Styling for HTML-based diagram */
        .timeline-bar {
            height: 24px;
            border-radius: 4px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .timeline-month {
            width: 8.33%;
            text-align: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: #6b7280;
            border-right: 1px solid #e5e7eb;
            padding: 4px 0;
        }

        .timeline-month:last-child {
            border-right: none;
        }

        /* Custom Palette - 'Energetic Growth' */
        :root {
            --color-primary: #10B981;
            /* Emerald */
            --color-secondary: #F59E0B;
            /* Amber */
            --color-accent: #3B82F6;
            /* Blue */
            --color-dark: #111827;
            --color-light: #F9FAFB;
        }

        .bg-primary {
            background-color: var(--color-primary);
        }

        .text-primary {
            color: var(--color-primary);
        }

        .bg-secondary {
            background-color: var(--color-secondary);
        }

        .text-secondary {
            color: var(--color-secondary);
        }

        .bg-accent {
            background-color: var(--color-accent);
        }
    </style>
</head>

<body class="bg-gray-50">

    <!-- Header Section -->
    <header class="bg-white shadow-lg border-b-4 border-emerald-500">
        <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0">
                <h1 class="text-4xl font-black text-gray-900 tracking-tight uppercase">Viroqua Vitality</h1>
                <p class="text-xl text-emerald-600 font-bold">0.5 Acre Intensive Market Garden Plan</p>
                <p class="text-sm text-gray-500 mt-1">Zone 5b/6a ‚Ä¢ Biointensive ‚Ä¢ High Profitability</p>
            </div>
            <div class="flex gap-4 text-center">
                <div class="p-4 bg-emerald-50 rounded-lg shadow-sm border border-emerald-100">
                    <div class="text-3xl font-black text-emerald-600">$55k+</div>
                    <div class="text-xs uppercase font-bold text-gray-600">Proj. Revenue</div>
                </div>
                <div class="p-4 bg-amber-50 rounded-lg shadow-sm border border-amber-100">
                    <div class="text-3xl font-black text-amber-500">3</div>
                    <div class="text-xs uppercase font-bold text-gray-600">Part-Time Staff</div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-12">

        <!-- Introduction -->
        <section class="bg-white rounded-xl shadow-md p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 border-l-4 border-emerald-500 pl-4">System Overview</h2>
            <p class="text-gray-600 leading-relaxed text-lg">
                This strategic plan outlines a high-efficiency agricultural system designed for <strong>Viroqua,
                    Wisconsin</strong>. By leveraging <strong>0.5 acres</strong> of biointensive beds and season
                extension technologies (low tunnels), the system maximizes yield per square foot. The focus is on
                high-turnover, high-value crops targeting the robust local food economy including CSAs, farmers'
                markets, and farm-to-table restaurants.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <!-- KPI Cards (No SVG) -->
                <div class="p-6 bg-blue-50 rounded-lg border border-blue-100 text-center">
                    <div class="text-4xl mb-2">üå±</div>
                    <h3 class="font-bold text-gray-800">Biointensive</h3>
                    <p class="text-sm text-gray-600 mt-1">30-inch permanent beds, deep soil prep, high density spacing.
                    </p>
                </div>
                <div class="p-6 bg-amber-50 rounded-lg border border-amber-100 text-center">
                    <div class="text-4xl mb-2">üå°Ô∏è</div>
                    <h3 class="font-bold text-gray-800">Season Extension</h3>
                    <p class="text-sm text-gray-600 mt-1">Harvest Feb-Dec using row covers & caterpillar tunnels.</p>
                </div>
                <div class="p-6 bg-emerald-50 rounded-lg border border-emerald-100 text-center">
                    <div class="text-4xl mb-2">üîÑ</div>
                    <h3 class="font-bold text-gray-800">Rapid Rotation</h3>
                    <p class="text-sm text-gray-600 mt-1">3+ successions per bed/season for greens & radish.</p>
                </div>
            </div>
        </section>

        <!-- Crop Selection & Profitability -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-2">Crop Profitability Analysis</h3>
                <p class="text-sm text-gray-600 mb-6">
                    Not all crops are equal. In a limited 0.5-acre system, we prioritize crops with high value per
                    square foot and short days-to-maturity (DTM). Salad greens and microgreens offer the highest return
                    on investment, acting as the financial engine, while tomatoes and peppers provide bulk seasonal
                    revenue.
                </p>
                <div class="chart-container">
                    <canvas id="cropProfitChart"></canvas>
                </div>
                <p class="text-xs text-center text-gray-400 mt-2 italic">Estimated revenue potential per bed-foot in WI
                    markets.</p>
            </div>

            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-2">Revenue Mix by Crop Category</h3>
                <p class="text-sm text-gray-600 mb-6">
                    The optimal crop mix balances reliable staples with high-margin quick crops. 40% of the land is
                    dedicated to rapid-turnover "Quick Greens" to ensure consistent weekly cash flow, while "Fruiting
                    Crops" occupy space for longer durations but anchor peak summer sales.
                </p>
                <div class="chart-container">
                    <canvas id="revenueMixChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Season Extension Visualizer (HTML/CSS Diagram) -->
        <section class="bg-white rounded-xl shadow-md p-8">
            <div class="flex justify-between items-end mb-4">
                <div>
                    <h3 class="text-xl font-bold text-gray-800">Production Calendar & Season Extension</h3>
                    <p class="text-sm text-gray-600 mt-1">
                        Utilizing low tunnels (spun-bonded fabric) allows for harvest 10 months of the year in Zone 5b.
                    </p>
                </div>
                <div class="flex gap-4 text-xs">
                    <div class="flex items-center"><span class="w-3 h-3 bg-emerald-500 rounded-full mr-1"></span> Active
                        Harvest</div>
                    <div class="flex items-center"><span class="w-3 h-3 bg-blue-400 rounded-full mr-1"></span>
                        Covered/Protected</div>
                </div>
            </div>

            <!-- Custom Timeline Grid -->
            <div class="w-full border border-gray-200 rounded-lg overflow-hidden bg-gray-50">
                <!-- Header Row -->
                <div class="flex bg-gray-100 border-b border-gray-200">
                    <div class="w-1/4 p-2 text-xs font-bold text-gray-500 uppercase tracking-wider pl-4">Crop Group
                    </div>
                    <div class="w-3/4 flex">
                        <div class="timeline-month">J</div>
                        <div class="timeline-month">F</div>
                        <div class="timeline-month">M</div>
                        <div class="timeline-month">A</div>
                        <div class="timeline-month">M</div>
                        <div class="timeline-month">J</div>
                        <div class="timeline-month">J</div>
                        <div class="timeline-month">A</div>
                        <div class="timeline-month">S</div>
                        <div class="timeline-month">O</div>
                        <div class="timeline-month">N</div>
                        <div class="timeline-month">D</div>
                    </div>
                </div>

                <!-- Row 1: Salad Mix -->
                <div class="flex border-b border-gray-200 bg-white items-center py-3">
                    <div class="w-1/4 px-4 text-sm font-bold text-gray-800">Salad Mix</div>
                    <div class="w-3/4 flex relative h-6 px-1">
                        <!-- Feb-Mar (Protected) -->
                        <div class="absolute left-[8.33%] w-[16.66%] h-full bg-blue-400 rounded opacity-80 text-[10px] flex items-center justify-center text-white font-bold"
                            title="Low Tunnels">tunnel</div>
                        <!-- Apr-Oct (Open) -->
                        <div
                            class="absolute left-[25%] w-[58.33%] h-full bg-emerald-500 rounded shadow-sm z-10 flex items-center justify-center text-white text-xs">
                            Main Season</div>
                        <!-- Nov-Dec (Protected) -->
                        <div
                            class="absolute left-[83.33%] w-[16.66%] h-full bg-blue-400 rounded opacity-80 text-[10px] flex items-center justify-center text-white font-bold">
                            tunnel</div>
                    </div>
                </div>

                <!-- Row 2: Root Veg -->
                <div class="flex border-b border-gray-200 bg-white items-center py-3">
                    <div class="w-1/4 px-4 text-sm font-bold text-gray-800">Carrots/Beets</div>
                    <div class="w-3/4 flex relative h-6 px-1">
                        <div class="absolute left-[25%] w-[16.66%] h-full bg-emerald-400 rounded opacity-60"></div>
                        <div
                            class="absolute left-[50%] w-[33.33%] h-full bg-emerald-500 rounded shadow-sm text-white text-xs flex items-center justify-center">
                            Storage Crops</div>
                        <div
                            class="absolute left-[83.33%] w-[16.66%] h-full bg-amber-500 rounded flex items-center justify-center text-white text-[10px] font-bold">
                            Sales</div>
                    </div>
                </div>

                <!-- Row 3: Tomatoes -->
                <div class="flex bg-white items-center py-3">
                    <div class="w-1/4 px-4 text-sm font-bold text-gray-800">Tomatoes</div>
                    <div class="w-3/4 flex relative h-6 px-1">
                        <div
                            class="absolute left-[33.33%] w-[16.66%] h-full bg-green-200 rounded border border-green-300 text-[10px] flex items-center justify-center text-green-800">
                            Planting</div>
                        <div
                            class="absolute left-[50%] w-[33.33%] h-full bg-red-500 rounded shadow-sm flex items-center justify-center text-white text-xs font-bold">
                            Harvest</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Labor & Management -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1 bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-2">Weekly Labor Allocation</h3>
                <p class="text-sm text-gray-600 mb-4">
                    Managing 0.5 acres intensively requires disciplined labor use. Harvesting and post-harvest handling
                    (wash/pack) consume the majority of hours to ensure premium quality for Viroqua markets.
                </p>
                <div class="chart-container">
                    <canvas id="laborChart"></canvas>
                </div>
            </div>

            <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Financial Projections (Season Total)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <p class="text-sm text-gray-600">
                            The system targets a high gross revenue by focusing on direct-to-consumer sales. Labor is
                            the largest expense, but part-time help ensures burnout prevention for the owner-operator.
                        </p>
                        <ul class="mt-4 space-y-2 text-sm text-gray-700">
                            <li class="flex items-center"><span class="w-2 h-2 bg-emerald-500 rounded-full mr-2"></span>
                                <strong>Net Profit Goal:</strong> 40-50% Margin</li>
                            <li class="flex items-center"><span class="w-2 h-2 bg-amber-500 rounded-full mr-2"></span>
                                <strong>Major Cost:</strong> Labor (35%)</li>
                            <li class="flex items-center"><span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
                                <strong>Efficiency:</strong> $2.50+ Revenue per sq ft</li>
                        </ul>
                    </div>
                    <div class="chart-container">
                        <canvas id="financeChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Marketing Strategy -->
        <section class="bg-gray-800 rounded-xl shadow-lg p-8 text-white">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-2xl font-bold mb-4 text-emerald-400">Market & Sales Strategy</h2>
                    <p class="text-gray-300 mb-6 leading-relaxed">
                        To maximize margins, we avoid wholesale distributors. The Viroqua area has a sophisticated food
                        culture. We utilize a hybrid model: reliable CSA subscriptions for baseline capital, Farmers'
                        Markets for premium pricing and brand building, and select Restaurant sales for bulk movement of
                        peak-season crops.
                    </p>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-4 bg-gray-700 rounded-lg">
                            <div class="text-amber-400 text-xl font-bold mb-1">CSA Model</div>
                            <div class="text-xs text-gray-400">Pre-sold shares stabilize early season cash flow.</div>
                        </div>
                        <div class="p-4 bg-gray-700 rounded-lg">
                            <div class="text-blue-400 text-xl font-bold mb-1">Restaurants</div>
                            <div class="text-xs text-gray-400">"Chef's Choice" sheets for excess specialty inventory.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="marketChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-400 text-sm py-8 border-t border-gray-200">
            <p>Generated for Viroqua, WI Agricultural Planning ‚Ä¢ 2024 Strategic Design</p>
            <p class="mt-2 text-xs">Data based on USDA Zone 5b/6a intensive market gardening benchmarks.</p>
        </footer>

    </main>

    <script>
        // --- UTILITIES ---
        // Label wrapping logic for Chart.js
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= maxLen) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Shared Tooltip Configuration
        const sharedTooltipConfig = {
            callbacks: {
                title: function (tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // Shared Chart Options
        const baseOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: { family: 'Roboto', size: 11 },
                        usePointStyle: true,
                        boxWidth: 8
                    }
                },
                tooltip: sharedTooltipConfig
            }
        };

        // --- CHARTS ---

        // 1. Crop Profitability Chart (Bar)
        const ctxProfit = document.getElementById('cropProfitChart').getContext('2d');
        new Chart(ctxProfit, {
            type: 'bar',
            data: {
                labels: ['Salad Mix', 'Microgreens', 'Heirloom Tomatoes', 'Radishes', 'Peppers', 'Root Veg'].map(l => wrapLabel(l)),
                datasets: [{
                    label: 'Est. Revenue ($/sq ft)',
                    data: [15, 25, 10, 8, 7, 4],
                    backgroundColor: [
                        '#10B981', // Emerald
                        '#059669', // Darker Emerald
                        '#EF4444', // Red
                        '#EC4899', // Pink
                        '#F59E0B', // Amber
                        '#8B5CF6'  // Purple
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                ...baseOptions,
                plugins: { ...baseOptions.plugins, legend: { display: false } },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Revenue per Sq Ft ($)' }
                    }
                }
            }
        });

        // 2. Revenue Mix Chart (Doughnut)
        const ctxRevenueMix = document.getElementById('revenueMixChart').getContext('2d');
        new Chart(ctxRevenueMix, {
            type: 'doughnut',
            data: {
                labels: ['Quick Greens (Salad/Micro)', 'Fruiting (Tomato/Pep)', 'Roots (Carrot/Beet)', 'Herbs & Specialty'].map(l => wrapLabel(l)),
                datasets: [{
                    data: [45, 30, 15, 10],
                    backgroundColor: ['#10B981', '#EF4444', '#F59E0B', '#6366F1'],
                    borderWidth: 0
                }]
            },
            options: {
                ...baseOptions,
                cutout: '60%'
            }
        });

        // 3. Labor Allocation Chart (Pie)
        const ctxLabor = document.getElementById('laborChart').getContext('2d');
        new Chart(ctxLabor, {
            type: 'pie',
            data: {
                labels: ['Harvest & Wash/Pack', 'Weeding & Cultivation', 'Planting & Seeding', 'Sales & Marketing', 'Bed Prep'].map(l => wrapLabel(l)),
                datasets: [{
                    data: [45, 20, 15, 10, 10],
                    backgroundColor: ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#6B7280'],
                    borderWidth: 1,
                    borderColor: '#ffffff'
                }]
            },
            options: baseOptions
        });

        // 4. Financial Stack Chart (Stacked Bar)
        const ctxFinance = document.getElementById('financeChart').getContext('2d');
        new Chart(ctxFinance, {
            type: 'bar',
            data: {
                labels: ['Projected Financials'].map(l => wrapLabel(l)),
                datasets: [
                    {
                        label: 'Net Profit',
                        data: [27500],
                        backgroundColor: '#10B981',
                        stack: 'Stack 0'
                    },
                    {
                        label: 'Labor Costs',
                        data: [19250],
                        backgroundColor: '#F59E0B',
                        stack: 'Stack 0'
                    },
                    {
                        label: 'Supplies/Seeds',
                        data: [5500],
                        backgroundColor: '#6B7280',
                        stack: 'Stack 0'
                    },
                    {
                        label: 'Marketing/Overhead',
                        data: [2750],
                        backgroundColor: '#9CA3AF',
                        stack: 'Stack 0'
                    }
                ]
            },
            options: {
                ...baseOptions,
                indexAxis: 'y', // Horizontal bar
                scales: {
                    x: {
                        stacked: true,
                        title: { display: true, text: 'Total USD ($)' }
                    },
                    y: {
                        stacked: true,
                        display: false
                    }
                }
            }
        });

        // 5. Market Strategy Chart (Polar Area)
        const ctxMarket = document.getElementById('marketChart').getContext('2d');
        new Chart(ctxMarket, {
            type: 'polarArea',
            data: {
                labels: ['Farmers Markets', 'CSA Shares', 'Restaurants', 'Farm Stand'].map(l => wrapLabel(l)),
                datasets: [{
                    data: [50, 30, 15, 5],
                    backgroundColor: [
                        'rgba(16, 185, 129, 0.8)', // Green
                        'rgba(245, 158, 11, 0.8)', // Amber
                        'rgba(59, 130, 246, 0.8)', // Blue
                        'rgba(239, 68, 68, 0.8)'   // Red
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                ...baseOptions,
                scales: {
                    r: {
                        ticks: { display: false },
                        grid: { color: 'rgba(255, 255, 255, 0.2)' }
                    }
                },
                plugins: {
                    ...baseOptions.plugins,
                    legend: {
                        ...baseOptions.plugins.legend,
                        labels: { color: '#ffffff' }
                    }
                }
            }
        });

    </script>
</body>

</html>